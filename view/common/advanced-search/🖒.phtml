<?php
/**
 * Advanced search partial for like filter.
 *
 * @var \Laminas\View\Renderer\PhpRenderer $this
 * @var array $query Current search query
 */

$plugins = $this->getHelperPluginManager();
$escape = $plugins->get('escapeHtml');
$translate = $plugins->get('translate');

$likeStatus = $query['like_status'] ?? '';
?>

<div class="field">
    <div class="field-meta">
        <label for="like-status"><?= $escape($translate('Like status')) ?></label>
    </div>
    <div class="inputs">
        <select name="like_status" id="like-status">
            <option value=""><?= $escape($translate('All')) ?></option>
            <option value="liked" <?= $likeStatus === 'liked' ? 'selected' : '' ?>><?= $escape($translate('Liked by me')) ?></option>
            <option value="disliked" <?= $likeStatus === 'disliked' ? 'selected' : '' ?>><?= $escape($translate('Disliked by me')) ?></option>
            <option value="voted" <?= $likeStatus === 'voted' ? 'selected' : '' ?>><?= $escape($translate('Voted by me')) ?></option>
            <option value="not_voted" <?= $likeStatus === 'not_voted' ? 'selected' : '' ?>><?= $escape($translate('Not voted by me')) ?></option>
        </select>
    </div>
</div>

<div class="field">
    <div class="field-meta">
        <label for="has-likes"><?= $escape($translate('Has likes')) ?></label>
    </div>
    <div class="inputs">
        <select name="has_likes" id="has-likes">
            <option value=""><?= $escape($translate('All')) ?></option>
            <option value="1" <?= isset($query['has_likes']) && $query['has_likes'] ? 'selected' : '' ?>><?= $escape($translate('Yes')) ?></option>
            <option value="0" <?= isset($query['has_likes']) && $query['has_likes'] === '0' ? 'selected' : '' ?>><?= $escape($translate('No')) ?></option>
        </select>
    </div>
</div>
